services:
  songseeker:
    build:
      context: .
      dockerfile: imagebuild/Dockerfile
    container_name: songseeker
    ports:
      - "8042:80"
    volumes:
      # Plex configuration (server URL and token)
      - /mnt/user/appdata/songseeker/plex-config.json:/usr/share/nginx/html/plex-config.json:ro
      # Plex mappings (manifest + mapping files)
      - /mnt/user/appdata/songseeker/plex-manifest.json:/usr/share/nginx/html/plex-manifest.json:ro
      - /mnt/user/appdata/songseeker/plex-mapping-de.json:/usr/share/nginx/html/plex-mapping-de.json:ro
      # Auth credentials (htpasswd format)
      - /mnt/user/appdata/songseeker/.htpasswd:/etc/nginx/.htpasswd:ro
      # Cookie signing secret (generate with: openssl rand -hex 32 > .cookie_secret)
      - /mnt/user/appdata/songseeker/.cookie_secret:/etc/nginx/.cookie_secret:ro
    restart: unless-stopped
